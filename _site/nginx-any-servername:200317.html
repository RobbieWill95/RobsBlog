<!DOCTYPE html>
<html lang="en">
<head>
    <title>Jekyll Nginx Server - Clark Weckmann</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="/assets/styles/main.css?v=9c24d44">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <meta name="keywords"
  content="Nginx, Jekyll, Production Server, Development Server, Server Cache Control">
<meta name="description" content="We're gonna learn how to set up a production environment that mimix the Jekyll development server. This will handle 404 errors, 500 errors, and cache control.">
<meta name="author" content="Clark Weckmann">
<link rel="canonical" href="http://localhost:4000/f/atom.xml">
<meta content="Weckmann" property="og:site_name">
<meta content="Jekyll Nginx Server" property="og:title">
<meta content="article" property="og:type">
<meta content="We're gonna learn how to set up a production environment that mimix the Jekyll development server. This will handle 404 errors, 500 errors, and cache control." property="og:description">
<meta content="http://localhost:4000/nginx-any-servername:200317" property="og:url">
<meta content="2020-03-17T00:00:00-05:00" property="article:published_time">
<meta content="http://localhost:4000/about" property="article:author">
<meta content="http://localhost:4000/assets/images/cover.jpg" property="og:image">
<meta content="Nginx, Jekyll, Production Server, Development Server, Server Cache Control" property="article:tag">
<meta name="twitter:title" content="Jekyll Nginx Server">
<meta name="twitter:url" content="http://localhost:4000/nginx-any-servername:200317">
<meta name="twitter:description" content="We're gonna learn how to set up a production environment that mimix the Jekyll development server. This will handle 404 errors, 500 errors, and cache control.">
    <meta name="robots" content="index, follow">
</head>

<body>
    <header>
    <nav class="navbar">
        <div class="nav">
            <a href="/" class="nav-logo">
                <img src="/assets/images/weckmann.png" width="70" height="70" alt="Logo">
            </a>
            <ul class="nav-links">
                <li><a href="/" name="Home"><i class="fas fa-home fa-lg"></i></a></li>
                <li><a href="/about" name="About"><i class="fas fa-user fa-lg"></i></a></li>
                <li><a href="https://codepen.io/clarkhacks" target="_blank" name="Codepen"><i class="fab fa-codepen fa-lg"></i></a></li>
            </ul>
        </div>
    </nav>

    <div class="intro-header">
        <div class="container">
            <div class="page-heading">
                <h1>Jekyll Nginx Server</h1>
            </div>
        </div>
    </div>
</header>



<div class="container" role="main">
    <article class="article">
        <p>Here’s how to mimic the Jekyll Development Server with Nginx for a production environment.
<!-- more --></p>

<p>Create a new <code class="highlighter-rouge">sites-available</code> block (make sure to remove the <code class="highlighter-rouge">default</code> file, it’s already listening on port 80).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> /etc/nginx/sites-available/
<span class="nv">$ </span><span class="nb">sudo </span>nano MYSITE
</code></pre></div></div>
<p>Copy and paste the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server <span class="o">{</span>
  listen 80<span class="p">;</span>
  server_name mysite.example.com<span class="p">;</span>
  root /YOUR-JEKYLL-SITE-PATH/_site<span class="p">;</span>

<span class="c"># Cache controle</span>
  expires 30s<span class="p">;</span>
  add_header Cache-Control public<span class="p">;</span>
  add_header ETag <span class="s2">""</span><span class="p">;</span>

<span class="c"># Error Pages</span>
  error_page 404 /404.html<span class="p">;</span>
  error_page 500 /500.html<span class="p">;</span>

<span class="c"># Your static assets that won't need the cache reloaded.</span>
  location  ~ ^/assets/ <span class="o">{</span>
    expires max<span class="p">;</span>
  <span class="o">}</span>

  location ~ /<span class="se">\.</span> <span class="o">{</span>
    <span class="k">return </span>404<span class="p">;</span>
    access_log off<span class="p">;</span>
    log_not_found off<span class="p">;</span>
  <span class="o">}</span>

<span class="c"># Favicon handler</span>
  location <span class="o">=</span> /favicon.ico <span class="o">{</span>
    try_files /favicon.ico <span class="o">=</span>204<span class="p">;</span>
    access_log off<span class="p">;</span>
    log_not_found off<span class="p">;</span>
  <span class="o">}</span>

<span class="c"># 404 handler</span>
  location / <span class="o">{</span>
    try_files <span class="nv">$uri</span> <span class="nv">$uri</span>.html <span class="nv">$uri</span>/ <span class="o">=</span>404<span class="p">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Save this file with <code class="highlighter-rouge">ctrl+x</code> then <code class="highlighter-rouge">Y</code> and enter. Now we have to link our new configuration file to the <code class="highlighter-rouge">sites-enabled</code> directory and restart Nginx.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo ln</span> <span class="nt">-s</span> /etc/nginx/sites-available/MYSITE /etc/nginx/sites-enabled/
<span class="nv">$ </span><span class="nb">sudo </span>service nginx restart
</code></pre></div></div>

<p><a target="_blank" href="https://www.amazon.com/gp/product/B07TC2BK1X/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B07TC2BK1X&amp;linkCode=as2&amp;tag=weckmann-20&amp;linkId=58a9ccecbd171fa564e28591902ecfe8"><img border="0" src="//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;MarketPlace=US&amp;ASIN=B07TC2BK1X&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL250_&amp;tag=weckmann-20" /></a></p>

<p>You’re all set!</p>

<p>The best way to host this is on a Raspberry Pi! It’s great for beginners! Check out my post on Changing your <a href="/change-pi-username:200426">Raspberry Pi username</a>!</p>

    </article>

</div>

<footer>
    <div class="container">
        <p class="credits copyright">
            <p class="credits theme-by">
                Made With &lt;3 By Clark Weckmann, &copy; 2020
            </p>
        </p>
    </div>
</footer>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-164935052-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-164935052-1');
</script>
<script data-ad-client="ca-pub-8747222803173946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>

</html>