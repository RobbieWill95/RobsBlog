<!DOCTYPE html>
<html lang="en">
<head>
    <title>Node Gmail API - Clark Weckmann</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="/assets/styles/main.css?v=9c24d44">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <meta name="keywords"
  content="javascript, node, gmail, api, express">
<meta name="description" content="Create your own Gmail API with Express and Node.">
<meta name="author" content="Clark Weckmann">
<link rel="canonical" href="http://localhost:4000/f/atom.xml">
<meta content="Weckmann" property="og:site_name">
<meta content="Node Gmail API" property="og:title">
<meta content="article" property="og:type">
<meta content="Create your own Gmail API with Express and Node." property="og:description">
<meta content="http://localhost:4000/node-gmail-api:171010" property="og:url">
<meta content="2017-10-10T00:00:00-05:00" property="article:published_time">
<meta content="http://localhost:4000/about" property="article:author">
<meta content="http://localhost:4000/assets/images/cover.jpg" property="og:image">
<meta content="javascript, node, gmail, api, express" property="article:tag">
<meta name="twitter:title" content="Node Gmail API">
<meta name="twitter:url" content="http://localhost:4000/node-gmail-api:171010">
<meta name="twitter:description" content="Create your own Gmail API with Express and Node.">
    <meta name="robots" content="index, follow">
</head>

<body>
    <header>
    <nav class="navbar">
        <div class="nav">
            <a href="/" class="nav-logo">
                <img src="/assets/images/weckmann.png" width="70" height="70" alt="Logo">
            </a>
            <ul class="nav-links">
                <li><a href="/" name="Home"><i class="fas fa-home fa-lg"></i></a></li>
                <li><a href="/about" name="About"><i class="fas fa-user fa-lg"></i></a></li>
                <li><a href="https://codepen.io/clarkhacks" target="_blank" name="Codepen"><i class="fab fa-codepen fa-lg"></i></a></li>
            </ul>
        </div>
    </nav>

    <div class="intro-header">
        <div class="container">
            <div class="page-heading">
                <h1>Node Gmail API</h1>
            </div>
        </div>
    </div>
</header>



<div class="container" role="main">
    <article class="article">
        <p>We will be building a simple Gmail API for easy notification use. Please note this is not the most secure method.</p>

<!-- more -->
<h3 id="requirements">Requirements</h3>
<ul>
  <li>Node Js</li>
  <li>Small Linux Server</li>
  <li><em>Throw Away</em> Gmail Account</li>
</ul>

<p><em>Check Out My Example</em> <a href="https://apis.clarkhacks.com/cgi/gui">Node Notify</a></p>
<h2 id="gmail-account">Gmail Account</h2>

<p><strong>DO NOT</strong> Use your daily Gmail Account. Create a <em>Throw Away</em> as we will need to enable <strong>less secure apps</strong>.</p>

<h4 id="create-a-new-gmail-account"><a href="https://accounts.google.com/SignUp">Create a New Gmail Account</a>.</h4>

<p>When creating your account note your password.</p>

<p>If you will not be responding to inbound emails you can enable a <em>Vacation</em> Response.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. In the top right, click Settings.
2. Scroll down to the "Vacation responder" section.
3. Select Vacation responder on.
4. Fill in the date range, subject, and message.
5. Under your message, check the box if you only want your contacts to see your vacation reply.
6. At the bottom of the page, click Save Changes.

~ Google Support
</code></pre></div></div>

<h4 id="less-secure-apps">Less Secure Apps</h4>
<p>Click the link below.</p>

<p><a href="https://www.google.com/settings/security/lesssecureapps">Enable Less Secure Apps</a>.</p>

<h3 id="copy-the-template">Copy The Template</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span><span class="nv">$ </span>git clone https://github.com/clarkhacks/Gmail-API
<span class="o">&gt;</span><span class="nv">$ </span><span class="nb">cd </span>Gmail-API
<span class="o">&gt;</span><span class="nv">$ </span>npm <span class="nb">install</span>
</code></pre></div></div>

<p>You now have a blank <code class="highlighter-rouge">app.js</code>, completed code (for example/copy-paste), and <code class="highlighter-rouge">node_modules</code> installed.</p>

<h3 id="the-code">The Code</h3>
<p>Add your details to <code class="highlighter-rouge">credentials.json</code>. This file will not be open to the public however, this is why our code is less secure.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">//</span><span class="w"> </span><span class="err">./credentials.json</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@gmail.com"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">email</span><span class="w">
  </span><span class="nl">"pass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AbCdEf!"</span><span class="w">			</span><span class="err">//</span><span class="w"> </span><span class="err">your</span><span class="w"> </span><span class="err">password</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Include your variables.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ./app.js</span>

<span class="kd">var</span>
  <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">),</span>
  <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">(),</span>
  <span class="nx">credentials</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./credentials.json</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// email &amp; pass</span>
</code></pre></div></div>

<p>Set up routes.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ./app.js</span>

<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/send</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// ...</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Send email from <code class="highlighter-rouge">localhost/send</code></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ./app.js &gt; In 'send' route.</span>

<span class="kd">var</span> <span class="nx">send</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gmail-send</span><span class="dl">'</span><span class="p">)({</span>
  <span class="na">user</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span>          <span class="c1">// credentials.json - email</span>
  <span class="na">pass</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">pass</span><span class="p">,</span>          <span class="c1">// credentials.json - password</span>
  <span class="na">to</span><span class="p">:</span> <span class="dl">"</span><span class="s2">name@domain.tld</span><span class="dl">"</span><span class="p">,</span>           <span class="c1">// Send To Email</span>
  <span class="na">subject</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello!</span><span class="dl">"</span><span class="p">,</span>               <span class="c1">// Subject</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sent from my Gmail API!</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// Message</span>
<span class="p">})({});</span>

<span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">To: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">sendTo</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">Subject: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">subject</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">sendWhat</span><span class="p">);</span>
</code></pre></div></div>

<p>Using queries to get email, subject, and message.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ./app.js &gt; In 'send' route.</span>

  <span class="kd">var</span> <span class="nx">sendTo</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">sendTo</span><span class="p">,</span>
    <span class="nx">subject</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">subject</span><span class="p">,</span>
    <span class="nx">sendWhat</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">sendWhat</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">sendTo</span> <span class="o">&amp;&amp;</span> <span class="nx">sendWhat</span> <span class="o">&amp;&amp;</span> <span class="nx">sendWhat</span><span class="p">)</span> <span class="p">{</span>
  	<span class="kd">var</span> <span class="nx">send</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gmail-send</span><span class="dl">'</span><span class="p">)({</span>
  	  <span class="na">user</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span>
  	  <span class="na">pass</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">pass</span><span class="p">,</span>
  	  <span class="na">to</span><span class="p">:</span> <span class="nx">sendTo</span><span class="p">,</span>
  	  <span class="na">subject</span><span class="p">:</span> <span class="nx">subject</span><span class="p">,</span>
  	  <span class="na">text</span><span class="p">:</span> <span class="nx">sendWhat</span><span class="p">,</span>
  	<span class="p">})({});</span>

  	<span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">"</span><span class="s2">To: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">sendTo</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">Subject: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">subject</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">sendWhat</span><span class="p">);</span>
  <span class="p">}</span>
   <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">No Email Specified.</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div>

<h3 id="in-use">In Use</h3>

<p>In your browser visit <code class="highlighter-rouge">http://localhost/send?sendTo=user@domain.tld&amp;subject=Hello&amp;sendWhat=Greetings%21</code>.</p>

<p>You should get a response that looks like this:</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>To: user@domain.tld
Subject: Hello
Greetings!
</code></pre></div></div>

<h2 id="what-can-i-do-with-this">What Can I Do With This?</h2>

<p>I have a service like this one running (I have secured it with json web tokens) that I use to notify my phone when <code class="highlighter-rouge">x</code> happens.</p>

<p>You could use this on the front-end by sending requests with javascript. I recommend securing the API itself.</p>

<p>Sending a text message to your phone can be costly (depending how often you do it). One way around this is with email! Send an email to YouNumber@smsgateway.tld and your phone should receive a text message.</p>

<p>Here are some of the SMS Gateway:</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Verizon		number@vtext.com
ATT		number@txt.att.net
Cricket		number@sms.mycricket.
T-Mobile	number@@tmomail.net

For more just Google :)
</code></pre></div></div>

    </article>

</div>

<footer>
    <div class="container">
        <p class="credits copyright">
            <p class="credits theme-by">
                Made With &lt;3 By Clark Weckmann, &copy; 2020
            </p>
        </p>
    </div>
</footer>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-164935052-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-164935052-1');
</script>
<script data-ad-client="ca-pub-8747222803173946" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>

</html>